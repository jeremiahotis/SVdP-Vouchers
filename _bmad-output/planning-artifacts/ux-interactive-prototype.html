<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VoucherShyft – Interactive Prototype</title>
  <style>
    :root {
      --color-primary: #3F647E;
      --color-primary-hover: #35576D;
      --color-primary-active: #2C4A5D;
      --color-bg-app: #F6F4F1;
      --color-bg-card: #FFFFFF;
      --color-bg-surface: #EFE9E4;
      --color-text-primary: #2B2B2B;
      --color-text-secondary: #5F6A70;
      --color-text-muted: #8A949A;
      --color-border: #D6DAD8;
      --color-divider: #E4E7E5;
      --color-success: #6F8F7A;
      --color-warning: #C6A86B;
      --color-error: #9A5A5A;
      --color-info: #7A8A94;
      --color-secondary-bg: #E7ECEF;
      --color-secondary-text: #3F647E;
      --radius: 10px;
      --shadow-1: 0 1px 3px rgba(0,0,0,0.06);
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-7: 28px;
      --space-8: 32px;
      --space-9: 40px;
      --sans: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: var(--sans); background: var(--color-bg-app); color: var(--color-text-primary); }
    h1,h2,h3 { margin: 0 0 var(--space-3); font-weight: 600; }
    h1 { font-size: 24px; }
    h2 { font-size: 18px; }
    .page { padding: var(--space-8); display: grid; gap: var(--space-8); }
    .panel { background: var(--color-bg-card); border: 1px solid var(--color-border); border-radius: var(--radius); box-shadow: var(--shadow-1); padding: var(--space-6); }
    .row { display: flex; gap: var(--space-3); align-items: center; }
    .stack { display: grid; gap: var(--space-3); }
    .label { font-size: 12px; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.04em; }
    .input { border: 1px solid var(--color-border); border-radius: 8px; padding: 10px 12px; background: #fff; font-size: 16px; }
    .input.mono { font-family: var(--mono); }
    .btn { border: 1px solid transparent; border-radius: 8px; padding: 10px 14px; font-size: 14px; cursor: pointer; }
    .btn.primary { background: var(--color-primary); color: #fff; }
    .btn.secondary { background: var(--color-secondary-bg); color: var(--color-secondary-text); }
    .btn.link { background: transparent; color: var(--color-text-secondary); text-decoration: underline; padding: 0; }
    .btn.disabled { background: #e2e2e2; color: #9b9b9b; cursor: not-allowed; }
    .chip { font-size: 12px; padding: 4px 8px; border-radius: 999px; border: 1px solid var(--color-border); background: #fff; }
    .tenant-pin { display: inline-flex; align-items: center; gap: var(--space-2); background: var(--color-bg-surface); border: 1px solid var(--color-border); border-radius: 999px; padding: 4px 10px; font-size: 12px; }
    .tenant-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--color-primary); display: inline-block; }
    .status { display: inline-flex; align-items: center; gap: var(--space-2); font-size: 12px; padding: 4px 8px; border-radius: 999px; border: 1px solid var(--color-border); }
    .status.ok { background: #F1F6F3; color: var(--color-success); }
    .status.warn { background: #FBF6EA; color: var(--color-warning); }
    .status.err { background: #F6EEEE; color: var(--color-error); }
    .status.info { background: #EEF3F6; color: var(--color-info); }
    .msg { border-radius: 8px; padding: var(--space-3); border: 1px solid var(--color-divider); background: #fff; }
    .msg.refusal { background: #F8F5F0; border-color: #E3DDD5; }
    .msg.error { background: #F6EEEE; border-color: #E3C8C8; }
    .two-col { display: grid; grid-template-columns: 2fr 1fr; gap: var(--space-6); }
    .results { display: grid; gap: var(--space-2); }
    .row-item { border: 1px solid var(--color-border); border-radius: var(--radius); padding: 10px 12px; background: #fff; }
    .row-item.selected { border-left: 4px solid var(--color-primary); }
    .lane { border: 1px solid var(--color-border); border-radius: var(--radius); padding: var(--space-4); background: #fff; display: grid; gap: var(--space-3); }
    .stepper { display: inline-flex; align-items: center; gap: var(--space-2); }
    .stepper button { width: 32px; height: 32px; border-radius: 6px; border: 1px solid var(--color-border); background: #fff; }
    .drawer { border: 1px solid var(--color-border); border-radius: var(--radius); padding: var(--space-3); background: var(--color-bg-surface); display: none; }
    .drawer.open { display: grid; gap: var(--space-2); }
    .divider { height: 1px; background: var(--color-divider); margin: var(--space-3) 0; }
    .hidden { display: none !important; }
    .tabbar { display: flex; gap: var(--space-2); margin-bottom: var(--space-3); }
    .tab { padding: 6px 10px; border-radius: 999px; border: 1px solid var(--color-border); background: #fff; font-size: 12px; cursor: pointer; }
    .tab.active { background: var(--color-primary); color: #fff; border-color: var(--color-primary); }
  </style>
</head>
<body>
  <div class="page">
    <div class="panel">
      <div class="row" style="justify-content: space-between;">
        <h1>VoucherShyft – POS Workstation</h1>
        <span class="tenant-pin"><span class="tenant-dot"></span> St Peter Store · Tenant A</span>
      </div>
      <div class="two-col">
        <!-- Left: Search + Results -->
        <div class="stack">
          <div class="row">
            <input id="searchName" class="input" style="flex:1;" placeholder="Name" />
            <input id="searchDob" class="input" style="width:160px;" placeholder="DOB" />
            <button id="searchBtn" class="btn primary">Search</button>
          </div>
          <div class="row" style="justify-content: space-between;">
            <span class="label">Matches</span>
            <span class="label" id="searchState">Idle</span>
          </div>
          <div id="results" class="results">
            <div class="row-item">No search yet.</div>
          </div>
        </div>

        <!-- Right: Guided Lane -->
        <div class="stack">
          <div class="lane" id="lane">
            <div class="row" style="justify-content: space-between;">
              <div>
                <div class="label">Redemption Lane</div>
                <div id="selectedName" class="value">Select a person</div>
              </div>
              <span id="laneStatus" class="status info">No selection</span>
            </div>
            <div id="activeVouchers" class="hidden">
              <div class="label">Active vouchers</div>
              <select id="voucherSelect" class="input">
                <option>Most recent clothing voucher (default)</option>
                <option>Clothing voucher – 2026‑02‑01</option>
              </select>
            </div>
            <input id="receiptId" class="input mono" placeholder="Receipt ID" />
            <input id="grossTotal" class="input mono" placeholder="Gross total (if required)" />
            <div class="row" style="justify-content: space-between;">
              <div>
                <div class="label">Coats eligible this year</div>
                <div class="value">1 coat per member/year</div>
                <div class="value" style="color: var(--color-text-muted);">0 means not claimed today.</div>
              </div>
              <div class="stepper">
                <button id="coatMinus">-</button>
                <span id="coatCount">0</span>
                <button id="coatPlus">+</button>
              </div>
            </div>
            <button id="redeemBtn" class="btn primary">Redeem</button>
            <button id="emergencyBtn" class="btn secondary">Create Emergency Voucher</button>
            <div id="laneRefusal" class="msg refusal hidden">
              <strong>Not eligible this year</strong>
              <div>Next step: Ask a manager.</div>
            </div>
            <div id="laneError" class="msg error hidden">
              <strong>System problem</strong>
              <div>Correlation ID: <span id="corrId">c‑91f2</span></div>
            </div>
            <div id="laneSuccess" class="msg hidden">
              <strong>Recorded</strong>
              <div>Receipt saved.</div>
            </div>
            <div id="emergencyDrawer" class="drawer">
              <div class="label">Emergency Voucher (Store‑only)</div>
              <div class="row">
                <input class="input" style="flex:1;" placeholder="First Name" />
                <input class="input" style="flex:1;" placeholder="Last Name" />
              </div>
              <div class="row">
                <input class="input" style="flex:1;" placeholder="Date of Birth" />
                <input class="input" style="width:120px;" placeholder="# Adults" />
                <input class="input" style="width:120px;" placeholder="# Children" />
              </div>
              <div class="row">
                <button id="emergencyRecord" class="btn primary">Submit Emergency Voucher</button>
                <button id="emergencyClose" class="btn link">Close</button>
              </div>
              <div id="emergencyRecorded" class="msg hidden">
                <strong>Emergency recorded</strong>
                <div>Referral instructions ready.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="panel">
      <div class="row" style="justify-content: space-between;">
        <h1>Conference/Partner Voucher Request</h1>
        <span class="tenant-pin"><span class="tenant-dot"></span> Issuer: Conference A · Tenant A</span>
      </div>
      <div class="tabbar">
        <button class="tab active" id="tabClothing">Clothing (default)</button>
        <button class="tab" id="tabFurniture">Furniture (if enabled)</button>
      </div>
      <div class="stack">
        <div class="card">
          <div class="label">Identity</div>
          <div class="row">
            <input class="input" style="flex:1;" placeholder="First Name*" />
            <input class="input" style="flex:1;" placeholder="Last Name*" />
            <input class="input" style="width:160px;" placeholder="DOB*" />
          </div>
          <div class="row">
            <input class="input" style="width:160px;" placeholder="Adults*" />
            <input class="input" style="width:160px;" placeholder="Kids*" />
          </div>
        </div>
        <div id="furnitureSection" class="card hidden">
          <div class="label">Furniture (enabled)</div>
          <div class="value">Catalog picker appears when enabled.</div>
        </div>
        <div class="row">
          <button id="submitRequest" class="btn primary">Submit Request</button>
          <button id="toggleDuplicatePass" class="btn secondary">Simulate Duplicate Pass</button>
          <button id="toggleDuplicateFail" class="btn secondary">Simulate Duplicate Fail</button>
        </div>
        <div id="reqSuccess" class="msg hidden"><strong>Approved</strong><div>Voucher issued.</div></div>
        <div id="reqRefusal" class="msg refusal hidden"><strong>Not eligible</strong><div>Reason: DUPLICATE_NOT_ELIGIBLE</div></div>
      </div>
    </div>
  </div>

  <script>
    const results = document.getElementById('results');
    const searchBtn = document.getElementById('searchBtn');
    const searchState = document.getElementById('searchState');
    const selectedName = document.getElementById('selectedName');
    const laneStatus = document.getElementById('laneStatus');
    const laneRefusal = document.getElementById('laneRefusal');
    const laneError = document.getElementById('laneError');
    const laneSuccess = document.getElementById('laneSuccess');
    const activeVouchers = document.getElementById('activeVouchers');
    const redeemBtn = document.getElementById('redeemBtn');
    const emergencyBtn = document.getElementById('emergencyBtn');
    const emergencyDrawer = document.getElementById('emergencyDrawer');
    const emergencyClose = document.getElementById('emergencyClose');
    const emergencyRecord = document.getElementById('emergencyRecord');
    const emergencyRecorded = document.getElementById('emergencyRecorded');
    const receiptId = document.getElementById('receiptId');
    const searchName = document.getElementById('searchName');

    function clearLaneMessages(){
      laneRefusal.classList.add('hidden');
      laneError.classList.add('hidden');
      laneSuccess.classList.add('hidden');
    }

    searchBtn.addEventListener('click', () => {
      searchState.textContent = 'Working…';
      setTimeout(() => {
        searchState.textContent = 'Results';
        results.innerHTML = `
          <div class="row-item" data-person="Luther Spural" data-status="Active">
            <div><strong>Luther Spural</strong> · DOB 07/11/1985</div>
            <div class="row">
              <span class="status ok">Active</span>
              <span class="status info">Coats: 1</span>
              <span class="chip">Phone 8842</span>
            </div>
          </div>
          <div class="row-item" data-person="Luther Spural" data-status="Redeemed">
            <div><strong>Luther Spural</strong> · DOB 07/11/1985</div>
            <div class="row">
              <span class="status warn">Redeemed</span>
              <span class="status info">Coats: 0</span>
              <span class="chip">Phone 4319</span>
            </div>
          </div>
        `;
        [...results.querySelectorAll('.row-item')].forEach(row => {
          row.addEventListener('click', () => {
            [...results.querySelectorAll('.row-item')].forEach(r => r.classList.remove('selected'));
            row.classList.add('selected');
            selectedName.textContent = `Selected: ${row.dataset.person}`;
            laneStatus.className = 'status ok';
            laneStatus.textContent = row.dataset.status === 'Active' ? 'Eligible' : 'Not redeemable';
            activeVouchers.classList.toggle('hidden', false);
            clearLaneMessages();
            receiptId.focus();
          });
        });
      }, 300);
    });

    redeemBtn.addEventListener('click', () => {
      clearLaneMessages();
      // Simulate success by default
      laneSuccess.classList.remove('hidden');
      searchName.focus();
    });

    emergencyBtn.addEventListener('click', () => {
      emergencyDrawer.classList.add('open');
      emergencyRecorded.classList.add('hidden');
    });

    emergencyClose.addEventListener('click', () => {
      emergencyDrawer.classList.remove('open');
      searchName.focus();
    });

    emergencyRecord.addEventListener('click', () => {
      emergencyRecorded.classList.remove('hidden');
    });

    // Request page
    const tabClothing = document.getElementById('tabClothing');
    const tabFurniture = document.getElementById('tabFurniture');
    const furnitureSection = document.getElementById('furnitureSection');
    const submitRequest = document.getElementById('submitRequest');
    const reqSuccess = document.getElementById('reqSuccess');
    const reqRefusal = document.getElementById('reqRefusal');
    const dupPass = document.getElementById('toggleDuplicatePass');
    const dupFail = document.getElementById('toggleDuplicateFail');

    tabClothing.addEventListener('click', () => {
      tabClothing.classList.add('active');
      tabFurniture.classList.remove('active');
      furnitureSection.classList.add('hidden');
    });

    tabFurniture.addEventListener('click', () => {
      tabFurniture.classList.add('active');
      tabClothing.classList.remove('active');
      furnitureSection.classList.remove('hidden');
    });

    submitRequest.addEventListener('click', () => {
      reqRefusal.classList.add('hidden');
      reqSuccess.classList.remove('hidden');
    });

    dupPass.addEventListener('click', () => {
      reqRefusal.classList.add('hidden');
      reqSuccess.classList.remove('hidden');
    });

    dupFail.addEventListener('click', () => {
      reqSuccess.classList.add('hidden');
      reqRefusal.classList.remove('hidden');
    });
  </script>
</body>
</html>
